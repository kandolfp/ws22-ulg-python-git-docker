<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <link rel="stylesheet" href="/ws22-ulg-python-git-docker/libs/highlight/github.min.css">
   
    <script src="/ws22-ulg-python-git-docker/libs/clipboard.min.js"></script>
  
  
  <script src="/ws22-ulg-python-git-docker/libs/plotly-1_58_5.min.js"></script> 
  <script>
    // This function is used when calling `\fig{...}` See # Using \fig{...} below
    const PlotlyJS_json = async (div, url) => {
      response = await fetch(url); // get file
      fig = await response.json(); // convert it to json
      // Make the plot fit the screen responsively. See the documentation of plotly.js. https://plotly.com/javascript/responsive-fluid-layout/
      if (typeof fig.config === 'undefined') { fig["config"]={} }
      delete fig.layout.width
      delete fig.layout.height
      fig["layout"]["autosize"] = true
      fig["config"]["autosizable"] = true
      fig["config"]["responsive"] = true

      // make it easier to scroll throught the website rather than being blocked by a figure.
      fig.config["scrollZoom"] = false

      // PlotlyJS.savefig by default add the some more attribute to make a static plot.
      // Disable them to make the website fancier.
      delete fig.config.staticPlot
      delete fig.config.displayModeBar
      delete fig.config.doubleClick
      delete fig.config.showTips

      Plotly.newPlot(div, fig);
    };
  </script>
  
  <link rel="stylesheet" href="/ws22-ulg-python-git-docker/css/jtd.css">
<link rel="stylesheet" href="/ws22-ulg-python-git-docker/css/extras.css">
<link rel="icon" href="/ws22-ulg-python-git-docker/assets/favicon.ico">

<style>
  /* #148 wrap long header */
  .franklin-content a.header-anchor,
  .franklin-toc li a
   {
    word-wrap: break-word;
    white-space: normal;
  }
</style>

   <title>cicd</title>  
</head>
<body>                      <!-- closed in foot.html -->
<div class="page-wrap">   <!-- closed in foot.html -->
  <!-- SIDE BAR -->
  <div class="side-bar">
    <div class="header">
      <a href="/ws22-ulg-python-git-docker/" class="title">
        ULG Software VU 2
      </a>
    </div>
    <label for="show-menu" class="show-menu">MENU</label>
    <input type="checkbox" id="show-menu" role="button">
    <div class="menu" id="side-menu">
      <ul class="menu-list">
        <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/" class="menu-list-link ">Start</a>
        <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/python/" class="menu-list-link ">Python</a>
          <ul class="menu-list-child-list ">
            <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/python/numpy/" class="menu-list-link ">Numpy</a>
              <ul class="menu-list-child-list ">
                <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/notebooks/html/Session1" class="menu-list-link ">Session Notes</a>
              </ul>
            <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/python/pandas/" class="menu-list-link ">pandas</a>
          </ul>
           <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/git/" class="menu-list-link ">Git</a>
          <ul class="menu-list-child-list ">
            <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/git/basics" class="menu-list-link ">Basics</a>
          </ul>
        <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/docker/" class="menu-list-link ">Docker</a>
          <ul class="menu-list-child-list ">
            <li class="menu-list-item "><a href="/ws22-ulg-python-git-docker/pages/docker/basics/" class="menu-list-link ">Basics</a>
          </ul>
        <li class="menu-list-item active"><a href="/ws22-ulg-python-git-docker/pages/cicd/" class="menu-list-link active">CI/CD</a>  
      </ul>
    </div>
    <div class="footer">
      This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target="_blank">Jekyll theme</a>.
    </div>
  </div>
  <!-- CONTENT -->
  <div class="main-content-wrap"> <!-- closed in foot.html -->
    <div class="main-content">    <!-- closed in foot.html -->
      <div class="main-header">
        ULG 971001 - Software (VU 2) - python, git, docker
      </div>



<!-- Content appended here (in class franklin-content) -->
<div class="franklin-content"><h1 id="basics_-_why_and_how"><a href="#basics_-_why_and_how" class="header-anchor">Basics - why and how?</a></h1>
<p>The term <em>CI/CD</em> is most commonly attributed to <em>continuous integration, continuous delivery, and continuous deployment</em>.  By introducing automation and continuous monitoring of the code lifecycle - from integration and testing to delivering and deploying - it helps keep the you codebase working and our <em>product</em> up and running. </p>
<p>The concept is often used in DevOps, MLOps or similar approaches. </p>
<h2 id="continuous_integration"><a href="#continuous_integration" class="header-anchor">Continuous integration</a></h2>
<p>The main idea of <em>continuous integration</em> is to automate building and testing such that your merge to a shared branch or repository is known to work.  The idea is that multiple people can work on the same code base and conflicts get recognized early and not after two months of developing.  Typically the CI <em>pipeline</em> does unit and integration tests that make sure that the chances have not broken the code.  This allows for regular, hopefully daily, merge pushes to the shared repository. </p>
<p>In Git therms this would be a common <em>remote repository</em> for the developers. </p>
<h2 id="continuous_delivery"><a href="#continuous_delivery" class="header-anchor">Continuous delivery</a></h2>
<p>Now that you know that the code is automatically build and unit as well as integration tested the automated delivery to a shared repository is the next step.</p>
<p>This means your code base is always ready to be deployed to a production environment, meaning that it is not just used by you but by others and even other programs build on it. </p>
<h2 id="continuous_deployment"><a href="#continuous_deployment" class="header-anchor">Continuous deployment</a></h2>
<p>The last step in this automation pipeline is the automatic deployment of the code to a production environment where it can be used.</p>
<h2 id="an_example"><a href="#an_example" class="header-anchor">An example</a></h2>
<p>Let us use these notes as example to illustrate this process:</p>
<ol>
<li><p>The authors write some new material about e.g. CI/CD stuff. This might take some time until the pictures are ready, the text has the correct format and code blocks are tested and developed.</p>
</li>
<li><p>In the next step the new section is <em>commited</em> to the local repository. This goes on for a couple of commits and separate for each author. </p>
</li>
<li><p>After the author is happy with the local changes it pushes the commits to the <em>remote repository</em>. </p>
</li>
<li><p>The repository living on <a href="https://github.com/kandolfp/ws22-ulg-python-git-docker">github</a> uses <a href="https://docs.github.com/en/actions/using-workflows">github workflows</a> to </p>
<ul>
<li><p>Checkout the repository</p>
</li>
<li><p>Test if the page can be build, if not tell the author</p>
</li>
<li><p>If the build was successful the page is moved over to <a href="https://pages.github.com/">github pages</a></p>
</li>
</ul>
</li>
<li><p>The reader of the notes always has the latest working copy of the notes. </p>
</li>
</ol>
<div class="note"><div class="title">âš  Note</div>
<div class="content">Obviously, this does not prevent the notes from having some errors or typos but the authors always get a quick feedback if there work can still be displayed.</div></div>
<h1 id="cicd_in_gitlab"><a href="#cicd_in_gitlab" class="header-anchor">CI/CD in GitLab</a></h1>
<p>GitLab supports and provides some tools for <a href="https://docs.gitlab.com/ee/ci/">CI/CD</a>. </p>
<p>The main part is a CI/CD pipeline that is by default triggered when a <code>.gitlab-ci.yml</code> file is present in a directory. </p>
<p>Let us consider the following example:</p>
<pre><code class="yml hljs"><span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">test</span>
  
<span class="hljs-attr">image:</span> <span class="hljs-string">python:3.11</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-attr">VAR1:</span> <span class="hljs-string">&quot;true&quot;</span>
  
<span class="hljs-attr">build:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">test</span>
  <span class="hljs-attr">before_script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pip</span> <span class="hljs-string">install</span> <span class="hljs-string">pytest</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pytest</span> <span class="hljs-string">test.py</span></code></pre>
<p>That simply executes some tests on the file <code>test.py</code> with the <a href="https://docs.pytest.org/en/7.2.x/index.html">pytest</a> framework. </p>
<div class="page-foot">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>  <a href="https://lfuonline.uibk.ac.at/public/people.vcard?id=59131">Peter Kandolf</a>. Last modified: January 13, 2023.
    Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
</div>
</div><!-- CONTENT ENDS HERE -->
    </div> <!-- end of class main-content -->
    </div> <!-- end of class main-content-wrap -->
    </div> <!-- end of class page-wrap-->
    
    
      


      <script>
    (function(){
    
      // Get the elements.
      // - the 'pre' element.
      // - the 'div' with the 'paste-content' id.
    
      var pre = document.getElementsByTagName('pre');
    
      // Add a copy button in the 'pre' element.
      // which only has the className of 'language-'.
    
      for (var i = 0; i < pre.length; i++) {
        var isLanguage = pre[i].children[0].tagName == 'CODE';
    
        if ( isLanguage ) {
          var button           = document.createElement('button');
              button.className = 'copy-button';
              button.textContent = 'Copy';
    
              pre[i].appendChild(button);
        }
      };
    
      // Run Clipboard
    
      var copyCode = new Clipboard('.copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
    
      // On success:
      // - Change the "Copy" text to "Copied".
      // - Swap it to "Copy" in 2s.
      // - Lead user to the "contenteditable" area with Velocity scroll.
    
      copyCode.on('success', function(event) {
        event.clearSelection();
        event.trigger.textContent = 'Copied';
        window.setTimeout(function() {
          event.trigger.textContent = 'Copy';
        }, 2000);
    
      });
    
      // On error (Safari):
      // - Change the  "Press Ctrl+C to copy"
      // - Swap it to "Copy" in 2s.
    
      copyCode.on('error', function(event) {
        event.trigger.textContent = 'Press "Ctrl + C" to copy';
        window.setTimeout(function() {
          event.trigger.textContent = 'Copy';
        }, 5000);
      });
    
    })();
</script>
    
  </body>
</html>

<script>
  var coll = document.getElementsByClassName("collapsible");
  var i;

  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var content = this.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        content.style.display = "block";
      }
    });
  }
</script>

<script>
  var coll = document.getElementsByClassName("solutioncollapsible");
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);
  const myVar = urlParams.get('solution')
  if ( myVar == 'true') {
    for (i = 0; i < coll.length; i++) {
      coll[i].style.display = "block";
    }
  }
</script>